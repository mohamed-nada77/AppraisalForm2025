@page
@model AppraisalPortal.Pages.Admin.PasswordsModel
@using Microsoft.AspNetCore.Authorization
@attribute [Authorize(Roles = "Admin")]

<h2>Initial Passwords (Rule-Based)</h2>
<p class="text-muted">
    These are computed from the rule: First initial + Day + Year (e.g., A232000 for 23-11-2000).
    If a user already changed their password, that new password is NOT shown here.
</p>

<div class="table-responsive">
    <table class="table table-sm align-middle">
        <thead>
            <tr>
                <th>EmpCode</th>
                <th>Name</th>
                <th>DOB</th>
                <th>DOJ</th>
                <th>Initial Password</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var e in Model.Items)
            {
                <tr>
                    <td>@e.EmpCode</td>
                    <td>@e.Name</td>
                    <td>@(e.DateOfBirth?.ToString("dd/MM/yyyy") ?? "—")</td>
                    <td>@(e.DateOfJoining?.ToString("dd/MM/yyyy") ?? "—")</td>
                    <td><code>@Model.Make(e)</code></td>
                </tr>
            }
        </tbody>
    </table>
</div>
